04.12.2020/05:10:52: 176.50.209.213: client
array (
  'where' => 'https://api.sandbox.paypal.com/v2/invoicing/invoices',
  'data' => 
  array (
    'success' => true,
    'code' => 201,
    'message' => NULL,
    'result' => '{"rel":"self","href":"https://api.sandbox.paypal.com/v2/invoicing/invoices/INV2-A5RY-XK5P-MGZA-4BL4","method":"GET"}',
    'issue' => NULL,
  ),
)
04.12.2020/05:10:53: 176.50.209.213: client
array (
  'where' => 'https://api.sandbox.paypal.com/v2/invoicing/invoices/INV2-A5RY-XK5P-MGZA-4BL4/send',
  'data' => 
  array (
    'success' => true,
    'code' => 202,
    'message' => NULL,
    'result' => '{"href":"https://www.sandbox.paypal.com/invoice/p/#INV2-A5RY-XK5P-MGZA-4BL4","rel":"payer-view","method":"GET"}',
    'issue' => NULL,
  ),
)
04.12.2020/05:10:53: 176.50.209.213: process_payment
array (
  'order_id' => 43,
  'payment_link' => 'https://www.sandbox.paypal.com/invoice/p/#INV2-A5RY-XK5P-MGZA-4BL4',
  'redirect_link' => 'https://developertools.ru/qr-payments/?payment_link=https%3A%2F%2Fwww.sandbox.paypal.com%2Finvoice%2Fp%2F%23INV2-A5RY-XK5P-MGZA-4BL4&order_id=43',
)
04.12.2020/05:39:37: 176.50.209.213: client
array (
  'where' => 'https://api.sandbox.paypal.com/v2/invoicing/invoices',
  'data' => 
  array (
    'success' => true,
    'code' => 201,
    'message' => NULL,
    'result' => '{"rel":"self","href":"https://api.sandbox.paypal.com/v2/invoicing/invoices/INV2-PPWB-X7ZV-LTJX-LSU9","method":"GET"}',
    'issue' => NULL,
  ),
)
04.12.2020/05:39:38: 176.50.209.213: client
array (
  'where' => 'https://api.sandbox.paypal.com/v2/invoicing/invoices/INV2-PPWB-X7ZV-LTJX-LSU9/send',
  'data' => 
  array (
    'success' => true,
    'code' => 202,
    'message' => NULL,
    'result' => '{"href":"https://www.sandbox.paypal.com/invoice/p/#INV2-PPWB-X7ZV-LTJX-LSU9","rel":"payer-view","method":"GET"}',
    'issue' => NULL,
  ),
)
04.12.2020/05:39:38: 176.50.209.213: process_payment
array (
  'order_id' => 44,
  'payment_link' => 'https://www.sandbox.paypal.com/invoice/p/#INV2-PPWB-X7ZV-LTJX-LSU9',
  'redirect_link' => 'https://developertools.ru/qr-payments/?payment_link=https%3A%2F%2Fwww.sandbox.paypal.com%2Finvoice%2Fp%2F%23INV2-PPWB-X7ZV-LTJX-LSU9&order_id=44',
)
04.12.2020/05:45:20: 173.0.82.126: client
array (
  'where' => 'https://api.sandbox.paypal.com/v1/notifications/verify-webhook-signature',
  'data' => 
  array (
    'success' => true,
    'code' => 200,
    'message' => NULL,
    'result' => '{"verification_status":"SUCCESS"}',
    'issue' => NULL,
  ),
)
04.12.2020/05:45:20: 173.0.82.126: webhook
array (
  'verify' => 'SUCCESS',
)
04.12.2020/05:45:22: 173.0.82.126: client
array (
  'where' => 'https://api.sandbox.paypal.com/v1/notifications/verify-webhook-signature',
  'data' => 
  array (
    'success' => true,
    'code' => 200,
    'message' => NULL,
    'result' => '{"verification_status":"SUCCESS"}',
    'issue' => NULL,
  ),
)
04.12.2020/05:45:22: 173.0.82.126: webhook
array (
  'verify' => 'SUCCESS',
)
04.12.2020/05:46:57: 173.0.82.126: client
array (
  'where' => 'https://api.sandbox.paypal.com/v1/notifications/verify-webhook-signature',
  'data' => 
  array (
    'success' => true,
    'code' => 200,
    'message' => NULL,
    'result' => '{"verification_status":"SUCCESS"}',
    'issue' => NULL,
  ),
)
04.12.2020/05:46:57: 173.0.82.126: webhook
array (
  'verify' => 'SUCCESS',
)
04.12.2020/05:46:57: 173.0.82.126: verifyWebhook $webhook_event_arr
array (
  '$webhook_event_arr' => 
  array (
    'id' => 'WH-2FC12238C7583690G-0T2276925F168820F',
    'event_version' => '1.0',
    'create_time' => '2020-12-04T05:46:14.319Z',
    'resource_type' => 'invoices',
    'event_type' => 'INVOICING.INVOICE.PAID',
    'summary' => 'An invoice is paid, partially paid, or payment is made and is pending.',
    'resource' => 
    array (
      'invoice' => 
      array (
        'id' => 'INV2-PPWB-X7ZV-LTJX-LSU9',
        'status' => 'PAID',
        'detail' => 
        array (
          'reference' => 'developertools.ru',
          'currency_code' => 'RUB',
          'note' => 'Спасибо за покупку!',
          'memo' => 'Это долгий контракт',
          'category_code' => 'SHIPPABLE',
          'invoice_number' => '44',
          'invoice_date' => '2020-12-03',
          'viewed_by_recipient' => false,
          'metadata' => 
          array (
            'create_time' => '2020-12-04T05:39:37Z',
            'last_update_time' => '2020-12-04T05:45:49Z',
            'first_sent_time' => '2020-12-04T05:43:17Z',
            'last_sent_time' => '2020-12-04T05:43:17Z',
            'created_by_flow' => 'REGULAR_SINGLE',
            'recipient_view_url' => 'https://www.sandbox.paypal.com/invoice/p/#PPWBX7ZVLTJXLSU9',
            'invoicer_view_url' => 'https://www.sandbox.paypal.com/invoice/details/INV2-PPWB-X7ZV-LTJX-LSU9',
          ),
          'archived' => false,
        ),
        'invoicer' => 
        array (
          'name' => 
          array (
            'given_name' => 'QR Market',
            'full_name' => 'QR Market',
          ),
          'address' => 
          array (
            'address_line_1' => '1923 McDonald Ave',
            'address_line_2' => '#22',
            'admin_area_2' => 'Brooklyn',
            'admin_area_1' => 'NY',
            'postal_code' => '11223',
            'country_code' => 'US',
          ),
          'email_address' => 'nor1msoft-busines@mail.ru',
          'phones' => 
          array (
            0 => 
            array (
              'country_code' => '1',
              'national_number' => '6469188488',
              'phone_type' => 'MOBILE',
            ),
          ),
          'website' => 'http://developertools.ru',
          'logo_url' => 'https://www.sandbox.paypal.com/securecontent/image/ffb88f4e9027003a6debc7a92e16c5107cd1be90195a32a387fb14a7e14cee20d35f2a03ee17b9fc48ea8d140c84998eb0ec524c5b9e7183d30b1b9959328a6a9d0c8ab724909b85e31b6971f687036d9240917ca74ba6e3bcfbceffab1554d131aa07af87038b92a7746217914da1aa',
        ),
        'primary_recipients' => 
        array (
          0 => 
          array (
            'billing_info' => 
            array (
              'name' => 
              array (
                'given_name' => 'Вася',
                'surname' => 'Миронов 2',
                'full_name' => 'Вася Миронов 2',
              ),
              'address' => 
              array (
                'address_line_1' => 'Советская 7/2',
                'admin_area_2' => 'Новосибирск',
                'admin_area_1' => 'Новосибирская обл',
                'postal_code' => '63009',
                'country_code' => 'RU',
              ),
              'email_address' => 'lareda1926@ofdow.com',
              'phones' => 
              array (
                0 => 
                array (
                  'country_code' => '7',
                  'national_number' => '1111111111',
                  'phone_type' => 'MOBILE',
                ),
              ),
            ),
            'shipping_info' => 
            array (
              'name' => 
              array (
                'given_name' => 'Вася',
                'surname' => 'Миронов 2',
                'full_name' => 'Вася Миронов 2',
              ),
              'address' => 
              array (
                'address_line_1' => 'Советская 7/2',
                'admin_area_2' => 'Новосибирск',
                'admin_area_1' => 'Новосибирская обл',
                'postal_code' => '63009',
                'country_code' => 'RU',
              ),
            ),
          ),
        ),
        'items' => 
        array (
          0 => 
          array (
            'id' => 'ITEM-847455907T781963M',
            'name' => 'Книга 1',
            'quantity' => '1',
            'unit_amount' => 
            array (
              'currency_code' => 'RUB',
              'value' => '50.00',
            ),
            'unit_of_measure' => 'QUANTITY',
          ),
          1 => 
          array (
            'id' => 'ITEM-0PU77024SL980321K',
            'name' => 'Тетрадь',
            'quantity' => '1',
            'unit_amount' => 
            array (
              'currency_code' => 'RUB',
              'value' => '10.00',
            ),
            'unit_of_measure' => 'QUANTITY',
          ),
        ),
        'configuration' => 
        array (
          'tax_calculated_after_discount' => false,
          'tax_inclusive' => false,
          'allow_tip' => true,
          'template_id' => 'TEMP-268217337T270740Y',
        ),
        'amount' => 
        array (
          'breakdown' => 
          array (
            'item_total' => 
            array (
              'currency_code' => 'RUB',
              'value' => '60.00',
            ),
            'discount' => 
            array (
              'invoice_discount' => 
              array (
                'amount' => 
                array (
                  'currency_code' => 'RUB',
                  'value' => '0.00',
                ),
              ),
              'item_discount' => 
              array (
                'currency_code' => 'RUB',
                'value' => '0.00',
              ),
            ),
            'tax_total' => 
            array (
              'currency_code' => 'RUB',
              'value' => '0.00',
            ),
            'shipping' => 
            array (
              'amount' => 
              array (
                'currency_code' => 'RUB',
                'value' => '0.00',
              ),
            ),
          ),
          'currency_code' => 'RUB',
          'value' => '60.00',
        ),
        'due_amount' => 
        array (
          'currency_code' => 'RUB',
          'value' => '0.00',
        ),
        'payments' => 
        array (
          'paid_amount' => 
          array (
            'currency_code' => 'RUB',
            'value' => '60.00',
          ),
          'transactions' => 
          array (
            0 => 
            array (
              'type' => 'PAYPAL',
              'payment_id' => '2T773381SC8220630',
              'transaction_type' => 'SALE',
              'payment_date' => '2020-12-03',
              'method' => 'PAYPAL',
              'amount' => 
              array (
                'currency_code' => 'RUB',
                'value' => '60.00',
              ),
            ),
          ),
        ),
        'links' => 
        array (
          0 => 
          array (
            'href' => 'https://api.sandbox.paypal.com/v2/invoicing/invoices/INV2-PPWB-X7ZV-LTJX-LSU9',
            'rel' => 'self',
            'method' => 'GET',
          ),
        ),
      ),
    ),
    'links' => 
    array (
      0 => 
      array (
        'href' => 'https://api.sandbox.paypal.com/v1/notifications/webhooks-events/WH-2FC12238C7583690G-0T2276925F168820F',
        'rel' => 'self',
        'method' => 'GET',
      ),
      1 => 
      array (
        'href' => 'https://api.sandbox.paypal.com/v1/notifications/webhooks-events/WH-2FC12238C7583690G-0T2276925F168820F/resend',
        'rel' => 'resend',
        'method' => 'POST',
      ),
    ),
  ),
)
04.12.2020/05:46:57: 173.0.82.126: verifyWebhook
array (
  'payment complete' => true,
)
04.12.2020/05:47:00: 173.0.82.126: client
array (
  'where' => 'https://api.sandbox.paypal.com/v1/notifications/verify-webhook-signature',
  'data' => 
  array (
    'success' => true,
    'code' => 200,
    'message' => NULL,
    'result' => '{"verification_status":"SUCCESS"}',
    'issue' => NULL,
  ),
)
04.12.2020/05:47:00: 173.0.82.126: webhook
array (
  'verify' => 'SUCCESS',
)
04.12.2020/05:47:00: 173.0.82.126: verifyWebhook $webhook_event_arr
array (
  '$webhook_event_arr' => 
  array (
    'id' => 'WH-2FC12238C7583690G-0T2276925F168820F',
    'event_version' => '1.0',
    'create_time' => '2020-12-04T05:46:14.319Z',
    'resource_type' => 'invoices',
    'event_type' => 'INVOICING.INVOICE.PAID',
    'summary' => 'An invoice is paid, partially paid, or payment is made and is pending.',
    'resource' => 
    array (
      'invoice' => 
      array (
        'id' => 'INV2-PPWB-X7ZV-LTJX-LSU9',
        'status' => 'PAID',
        'detail' => 
        array (
          'reference' => 'developertools.ru',
          'currency_code' => 'RUB',
          'note' => 'Спасибо за покупку!',
          'memo' => 'Это долгий контракт',
          'category_code' => 'SHIPPABLE',
          'invoice_number' => '44',
          'invoice_date' => '2020-12-03',
          'viewed_by_recipient' => false,
          'metadata' => 
          array (
            'create_time' => '2020-12-04T05:39:37Z',
            'last_update_time' => '2020-12-04T05:45:49Z',
            'first_sent_time' => '2020-12-04T05:43:17Z',
            'last_sent_time' => '2020-12-04T05:43:17Z',
            'created_by_flow' => 'REGULAR_SINGLE',
            'recipient_view_url' => 'https://www.sandbox.paypal.com/invoice/p/#PPWBX7ZVLTJXLSU9',
            'invoicer_view_url' => 'https://www.sandbox.paypal.com/invoice/details/INV2-PPWB-X7ZV-LTJX-LSU9',
          ),
          'archived' => false,
        ),
        'invoicer' => 
        array (
          'name' => 
          array (
            'given_name' => 'QR Market',
            'full_name' => 'QR Market',
          ),
          'address' => 
          array (
            'address_line_1' => '1923 McDonald Ave',
            'address_line_2' => '#22',
            'admin_area_2' => 'Brooklyn',
            'admin_area_1' => 'NY',
            'postal_code' => '11223',
            'country_code' => 'US',
          ),
          'email_address' => 'nor1msoft-busines@mail.ru',
          'phones' => 
          array (
            0 => 
            array (
              'country_code' => '1',
              'national_number' => '6469188488',
              'phone_type' => 'MOBILE',
            ),
          ),
          'website' => 'http://developertools.ru',
          'logo_url' => 'https://www.sandbox.paypal.com/securecontent/image/ffb88f4e9027003a6debc7a92e16c5107cd1be90195a32a387fb14a7e14cee20d35f2a03ee17b9fc48ea8d140c84998eb0ec524c5b9e7183d30b1b9959328a6a9d0c8ab724909b85e31b6971f687036d9240917ca74ba6e3bcfbceffab1554d131aa07af87038b92a7746217914da1aa',
        ),
        'primary_recipients' => 
        array (
          0 => 
          array (
            'billing_info' => 
            array (
              'name' => 
              array (
                'given_name' => 'Вася',
                'surname' => 'Миронов 2',
                'full_name' => 'Вася Миронов 2',
              ),
              'address' => 
              array (
                'address_line_1' => 'Советская 7/2',
                'admin_area_2' => 'Новосибирск',
                'admin_area_1' => 'Новосибирская обл',
                'postal_code' => '63009',
                'country_code' => 'RU',
              ),
              'email_address' => 'lareda1926@ofdow.com',
              'phones' => 
              array (
                0 => 
                array (
                  'country_code' => '7',
                  'national_number' => '1111111111',
                  'phone_type' => 'MOBILE',
                ),
              ),
            ),
            'shipping_info' => 
            array (
              'name' => 
              array (
                'given_name' => 'Вася',
                'surname' => 'Миронов 2',
                'full_name' => 'Вася Миронов 2',
              ),
              'address' => 
              array (
                'address_line_1' => 'Советская 7/2',
                'admin_area_2' => 'Новосибирск',
                'admin_area_1' => 'Новосибирская обл',
                'postal_code' => '63009',
                'country_code' => 'RU',
              ),
            ),
          ),
        ),
        'items' => 
        array (
          0 => 
          array (
            'id' => 'ITEM-847455907T781963M',
            'name' => 'Книга 1',
            'quantity' => '1',
            'unit_amount' => 
            array (
              'currency_code' => 'RUB',
              'value' => '50.00',
            ),
            'unit_of_measure' => 'QUANTITY',
          ),
          1 => 
          array (
            'id' => 'ITEM-0PU77024SL980321K',
            'name' => 'Тетрадь',
            'quantity' => '1',
            'unit_amount' => 
            array (
              'currency_code' => 'RUB',
              'value' => '10.00',
            ),
            'unit_of_measure' => 'QUANTITY',
          ),
        ),
        'configuration' => 
        array (
          'tax_calculated_after_discount' => false,
          'tax_inclusive' => false,
          'allow_tip' => true,
          'template_id' => 'TEMP-268217337T270740Y',
        ),
        'amount' => 
        array (
          'breakdown' => 
          array (
            'item_total' => 
            array (
              'currency_code' => 'RUB',
              'value' => '60.00',
            ),
            'discount' => 
            array (
              'invoice_discount' => 
              array (
                'amount' => 
                array (
                  'currency_code' => 'RUB',
                  'value' => '0.00',
                ),
              ),
              'item_discount' => 
              array (
                'currency_code' => 'RUB',
                'value' => '0.00',
              ),
            ),
            'tax_total' => 
            array (
              'currency_code' => 'RUB',
              'value' => '0.00',
            ),
            'shipping' => 
            array (
              'amount' => 
              array (
                'currency_code' => 'RUB',
                'value' => '0.00',
              ),
            ),
          ),
          'currency_code' => 'RUB',
          'value' => '60.00',
        ),
        'due_amount' => 
        array (
          'currency_code' => 'RUB',
          'value' => '0.00',
        ),
        'payments' => 
        array (
          'paid_amount' => 
          array (
            'currency_code' => 'RUB',
            'value' => '60.00',
          ),
          'transactions' => 
          array (
            0 => 
            array (
              'type' => 'PAYPAL',
              'payment_id' => '2T773381SC8220630',
              'transaction_type' => 'SALE',
              'payment_date' => '2020-12-03',
              'method' => 'PAYPAL',
              'amount' => 
              array (
                'currency_code' => 'RUB',
                'value' => '60.00',
              ),
            ),
          ),
        ),
        'links' => 
        array (
          0 => 
          array (
            'href' => 'https://api.sandbox.paypal.com/v2/invoicing/invoices/INV2-PPWB-X7ZV-LTJX-LSU9',
            'rel' => 'self',
            'method' => 'GET',
          ),
        ),
      ),
    ),
    'links' => 
    array (
      0 => 
      array (
        'href' => 'https://api.sandbox.paypal.com/v1/notifications/webhooks-events/WH-2FC12238C7583690G-0T2276925F168820F',
        'rel' => 'self',
        'method' => 'GET',
      ),
      1 => 
      array (
        'href' => 'https://api.sandbox.paypal.com/v1/notifications/webhooks-events/WH-2FC12238C7583690G-0T2276925F168820F/resend',
        'rel' => 'resend',
        'method' => 'POST',
      ),
    ),
  ),
)
